<!-- for loop before -->
<div class="mt-4 mt-lg-5 text-center mb-3 mb-md-5">
    {% if category.item_set.count == 0 %}
    <h4 class="mb-3 pb-1 text-muted border-bottom text-center font-weight-lighter">More {{category}} are coming...</h4>
    <p class="font-weight-lighter text-muted mb-5">Feel free to browse some other product</p>
    {% endif %}

    <!-- render a single category: skip to the next category if there's no items in this category-->
    {% if category.item_set.count > 0  %}
    <h4 class="mb-3 pb-1 border-bottom font-weight-light"><a class="text-dark"
            href="{{category.get_category_url}}">{{category}}</a></h4>

    <!-- when this category has subcategories -->
    {% if category.subcategory_set.count > 0 %}

    <div class="container px-2">

        <!-- subcategory iteration -->
        {% for subcategory in category.subcategory_set.all %}

        <!-- if there's no items under this subcategory, skip to the next subcategory -->
        {% if subcategory.item_set.count > 0 %}

        <h6 class="my-3 pb-1 border-bottom border-light font-weight-lighter"><a class="text-dark"
                href="{{subcategory.get_subcategory_url}}">{{subcategory.name}}</a></h6>
        <!-- {% if subcategory.description %}
                                <p class="mt-n3 mb-4 px-3"><small class="font-weight-lighter">{{subcategory.description}}</small></p>
                            {% endif %} -->
        <div class="row">
            {% for item in subcategory.item_set.all %}

            {% include 'boutique/include/item_in_listviews.html' %}

            {% endfor %}
        </div>

        {% endif %}
        <!-- / if there's no items under this subcategory, skip to the next subcategory -->

        {% endfor %}
        <!-- / subcategory iteration -->

    </div>

    <!-- when this category does not have a subcategory -->
    {% else %}

    <!-- show description if there is one -->
    {% if category.description %}
    <p class="mt-n2 mb-4 px-3"><small class="font-weight-lighter">{{category.description}}</small></p>
    {% endif %}

    <div class="container px-2">
        <div class="row">
            {% for item in category.item_set.all %}

            {% include 'boutique/include/item_in_listviews.html' %}

            {% endfor %}
        </div>
    </div>

    {% endif %}
    {% endif %}
    <!-- / this category has subcategories or not -->
</div>